var FlashUI=(()=>{var g=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var L=Object.prototype.hasOwnProperty;var b=(h,t)=>{for(var e in t)g(h,e,{get:t[e],enumerable:!0})},I=(h,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of v(t))!L.call(h,n)&&n!==e&&g(h,n,{get:()=>t[n],enumerable:!(s=y(t,n))||s.enumerable});return h};var O=h=>I(g({},"__esModule",{value:!0}),h);var k={};b(k,{Renderer:()=>E,Router:()=>_,State:()=>x});var x=class{constructor(t={}){this.state={...t},this.listeners=new Map,this.callack=null}set(t,e){if(this.state[t]=e,this.subscribe(t,this.callack),this.listeners.has(t))for(let s of this.listeners.get(t))s(e);this.unsubscribe(t,this.callack)}setContext(t,e){this.state[t]=e}setStet(t){this.callack=t}get(t){return this.state[t]}getState(){return{...this.state}}subscribe(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}unsubscribe(t,e){if(this.listeners.has(t)){let s=this.listeners.get(t).indexOf(e);s!==-1&&this.listeners.get(t).splice(s,1)}}};var E=class{constructor(){this.oldVtree=null}_createElement(t){if(!t.tag)return document.createTextNode("");let e=document.createElement(t.tag);e._listeners={};for(let[s,n]of Object.entries(t.attrs||{}))if(s.startsWith("on")&&typeof n=="function"){let r=s.slice(2).toLowerCase();t.player?addEventListener(r,n):(e.addEventListener(r,n),e._listeners[r]=n)}else e.setAttribute(s,n);return t.children&&t.children.forEach(s=>{e.appendChild(this._createElement(s))}),t.text&&e.appendChild(document.createTextNode(t.text)),t.el=e,e}render(t,e){let s=typeof t=="string"?document.querySelector(t):t;s&&(this.oldVtree?(this._patch(s,e,this.oldVtree),this.oldVtree=e):(s.innerHTML="",this.rootElement=this._createElement(e),s.appendChild(this.rootElement),this.oldVtree=e))}_patch(t,e,s){if(!s){if(e){let i=this._createElement(e);t.appendChild(i),e.el=i}return}if(!e){s.el&&s.el.parentNode===t&&t.removeChild(s.el);return}if(typeof e=="string"||typeof s=="string"){if(e!==s){let i=this._createElement(e);s.el&&s.el.parentNode===t?t.replaceChild(i,s.el):t.appendChild(i),typeof e!="string"&&(e.el=i)}else e.el=s.el;return}if(e.tag!==s.tag||e.attrs?.key!==s.attrs?.key){let i=this._createElement(e);s.el&&s.el.parentNode===t?t.replaceChild(i,s.el):t.appendChild(i),e.el=i;return}let n=e.el=s.el;this._updateAttributes(n,e.attrs||{},s.attrs||{});let r=e.children||[],o=s.children||[],a=new Map,u=[];o.forEach((i,l)=>{let c=i?.attrs?.key;c!=null?a.set(c,i):u.push({child:i,index:l})});let m=new Set,d=new Array(r.length),p=[];r.forEach((i,l)=>{let c=i?.attrs?.key;if(c!=null&&a.has(c)){let f=a.get(c),C=o.indexOf(f);d[l]=C,a.delete(c),p.push({newChild:i,newIndex:l,oldIndex:C}),m.add(C)}else if(u.length>0){let f=u.shift();d[l]=f.index,p.push({newChild:i,newIndex:l,oldIndex:f.index}),m.add(f.index)}else d[l]=-1,p.push({newChild:i,newIndex:l,oldIndex:-1})}),p.forEach(({newChild:i,oldIndex:l})=>{let c=l!==-1?o[l]:null;this._patch(n,i,c)});for(let i=0;i<r.length;i++)if(d[i]===-1){let c=r[i].el,f=n.childNodes[i]||null;n.insertBefore(c,f)}a.forEach(i=>this._patch(n,null,i)),u.forEach(({child:i,index:l})=>{m.has(l)||this._patch(n,null,i)}),e.text!==s.text&&(n.textContent=e.text||"")}_updateAttributes(t,e,s){if(t){t._listeners=t._listeners||{};for(let n of Object.keys(s))if(!(n in e))if(n.startsWith("on")&&typeof s[n]=="function"){let r=n.slice(2).toLowerCase();t._listeners[r]&&(t.removeEventListener(r,t._listeners[r]),delete t._listeners[r])}else t.removeAttribute(n);for(let[n,r]of Object.entries(e))if(n.startsWith("on")&&typeof r=="function"){let o=n.slice(2).toLowerCase(),a=t._listeners[o];a!==r&&(a&&t.removeEventListener(o,a),t.addEventListener(o,r),t._listeners[o]=r)}else n==="checked"||n==="disabled"||n==="selected"?t[n]=!!r:t.setAttribute(n,r)}}};var _=class{constructor(t={}){this.routes=t,window.addEventListener("DOMContentLoaded",()=>this.load(location.hash)),window.addEventListener("hashchange",()=>this.load(location.hash))}getPath(t){return t.replace(/^#/,"")||"/"}load(t){let e=this.getPath(t),s=this.routes[e];s&&typeof s=="function"?s():console.error(`Route "${e}" not found`)}};return O(k);})();
